// Copyright lowRISC contributors.
// Licensed under the Apache License, Version 2.0, see LICENSE for details.
// SPDX-License-Identifier: Apache-2.0

#include "simple_system_common.h"

int main(int argc, char **argv) {

  //WRITE BLOCKDIM = 8
  DEV_WRITE(POSIT_COOPROC_BASE, 0x60000008);

  //WRITE GB
  DEV_WRITE(POSIT_COOPROC_BASE, 0x7000FFFF);
  DEV_WRITE(POSIT_COOPROC_BASE, 0x7010FFFF);
  DEV_WRITE(POSIT_COOPROC_BASE, 0x7020FFFF);
  DEV_WRITE(POSIT_COOPROC_BASE, 0x7030FFFF);
  DEV_WRITE(POSIT_COOPROC_BASE, 0x70402222);
  DEV_WRITE(POSIT_COOPROC_BASE, 0x70502222);
  DEV_WRITE(POSIT_COOPROC_BASE, 0x70602222);
  DEV_WRITE(POSIT_COOPROC_BASE, 0x70702222);
  DEV_WRITE(POSIT_COOPROC_BASE, 0x70803333);
  DEV_WRITE(POSIT_COOPROC_BASE, 0x70903333);
  DEV_WRITE(POSIT_COOPROC_BASE, 0x70A03333);
  DEV_WRITE(POSIT_COOPROC_BASE, 0x70B03333);
  DEV_WRITE(POSIT_COOPROC_BASE, 0x70C04444);
  DEV_WRITE(POSIT_COOPROC_BASE, 0x70D04444);
  DEV_WRITE(POSIT_COOPROC_BASE, 0x70E04444);
  DEV_WRITE(POSIT_COOPROC_BASE, 0x70F04444);

  //LOAD
  DEV_WRITE(POSIT_COOPROC_BASE, 0x10000000);
  DEV_WRITE(POSIT_COOPROC_BASE, 0x10100008);

  //POSIT OP = 3 (ADD)
  //4 (MUL) 5 (DIV)
  DEV_WRITE(POSIT_COOPROC_BASE, 0x30001020);

  //STORE
  DEV_WRITE(POSIT_COOPROC_BASE, 0x20200000);

  //READ GB
  DEV_WRITE(POSIT_COOPROC_BASE, 0x80000000);
  puthex(DEV_READ(POSIT_COOPROC_BASE, 0));
  puts("\n");
  DEV_WRITE(POSIT_COOPROC_BASE, 0x80000001);
  puthex(DEV_READ(POSIT_COOPROC_BASE, 0));
  puts("\n");
  DEV_WRITE(POSIT_COOPROC_BASE, 0x80000002);
  puthex(DEV_READ(POSIT_COOPROC_BASE, 0));
  puts("\n");
  DEV_WRITE(POSIT_COOPROC_BASE, 0x80000003);
  puthex(DEV_READ(POSIT_COOPROC_BASE, 0));
  puts("\n");
  DEV_WRITE(POSIT_COOPROC_BASE, 0x80000004);
  puthex(DEV_READ(POSIT_COOPROC_BASE, 0));
  puts("\n");
  DEV_WRITE(POSIT_COOPROC_BASE, 0x80000005);
  puthex(DEV_READ(POSIT_COOPROC_BASE, 0));
  puts("\n");
  DEV_WRITE(POSIT_COOPROC_BASE, 0x80000006);
  puthex(DEV_READ(POSIT_COOPROC_BASE, 0));
  puts("\n");
  DEV_WRITE(POSIT_COOPROC_BASE, 0x80000007);
  puthex(DEV_READ(POSIT_COOPROC_BASE, 0));
  puts("\n");

  return 0;
}
